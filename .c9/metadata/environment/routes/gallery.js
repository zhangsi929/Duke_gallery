{"changed":true,"filter":false,"title":"gallery.js","tooltip":"/routes/gallery.js","value":"var express = require(\"express\");\nvar router  = express.Router();\nvar Image  = require(\"../models/image\");\nvar middleware = require(\"../middleware\");\nvar geocoder = require('geocoder');\nvar multer = require('multer');\nvar storage = multer.diskStorage({\n  filename: function(req, file, callback) {\n    callback(null, Date.now() + file.originalname);\n  }\n});\nvar imageFilter = function (req, file, cb) {\n    // accept image files only\n    if (!file.originalname.match(/\\.(jpg|jpeg|png|gif)$/i)) {\n        return cb(new Error('Only image files are allowed!'), false);\n    }\n    cb(null, true);\n};\nvar upload = multer({ storage: storage, fileFilter: imageFilter})\nvar cloudinary = require('cloudinary');\ncloudinary.config({ \n  cloud_name: 'zhangsi929', \n  api_key: '532569324951986', \n  api_secret: 'XV-oJd6agQFMKGRrsC5QMyuH1uA'\n});\n\n// Define escapeRegex function for search feature\nfunction escapeRegex(text) {\n    return text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, \"\\\\$&\");\n};\n\n// Gallery route: pull all data from DB, and render index.ejs, pass allImages to index.ejs as gallery\nrouter.get(\"/\", function(req, res){\n    if (req.query.search){\n        const regex = new RegExp(escapeRegex(req.query.search), 'gi');\n      // Get all campgrounds from DB\n      Image.find({name: regex}, function(err, allImages){\n         if(err){\n            console.log(err);\n         } else {\n            res.render(\"images/index\",{gallery:allImages, page: 'campgrounds', currentUser: req.user});\n         }\n      });\n    } else {\n        // Get all from DB\n        Image.find({}, function(err, allImages){\n           if(err){\n               console.log(err);\n           } else {\n              res.render(\"images/index\",{gallery:allImages, page: 'campgrounds', currentUser: req.user});\n           }\n        });\n    }\n});\n\n//router.post(\"/\", middleware.isLoggedIn, function(req, res){\nrouter.post(\"/\", middleware.isLoggedIn, upload.single('image'), function(req, res) {\n    // get data from form and add to campgrounds array\n    var name = req.body.name;\n    var image = req.body.image ? req.body.image : \"/images/temp.png\";\n    var desc = req.body.description;\n    var author = {\n        id: req.user._id,\n        username: req.user.username\n    }\n    geocoder.geocode(req.body.location, function (err, data) {\n        if (err){\n            req.flash('error', err.message);\n            return res.redirect('back');\n        }\n        if (data.results[0] === undefined) {\n            req.flash('error', \"Location invalid\");\n            return res.redirect('back');\n        }\n        var lat = data.results[0].geometry.location.lat;\n        var lng = data.results[0].geometry.location.lng;\n        var location = data.results[0].formatted_address;\n        cloudinary.uploader.upload(req.file.path, function(result) {\n            //image variable needs to be here so the image can be stored and uploaded to cloudinary\n            image = result.secure_url;\n            //Captures All Objects And Stores Them\n            var newImage = {name: name, image: image, description: desc, author:author, location: location, lat: lat, lng: lng};\n            // Create a new campground and save to DB by using the create method\n            Image.create(newImage, function(err, newlyCreated){\n                if(err){\n                    //Logs Error\n                    req.flash('error', err.message);\n                    return res.redirect('back');\n                } else {\n                    //redirect back to campgrounds page\n                    req.flash(\"success\", \"Image Added To DukeGallery!!\")\n                    //Redirects Back To Featured Campgrounds Page\n                    res.redirect(\"/gallery\");\n                }\n            });\n        });\n    });\n});\n\n// CREATE - add new campground to DB\nrouter.get(\"/new\", middleware.isLoggedIn, function(req, res){\n   res.render(\"images/new\"); \n});\n\n// SHOW - shows more info about one campground\nrouter.get(\"/:id\", function(req, res){\n    //find the campground with provided ID\n    Image.findById(req.params.id).populate(\"comments\").exec(function(err, foundImage){\n        if(err){\n            console.log(err);\n        } else {\n            //render show template with that \n            res.render(\"images/show\", {gallery: foundImage});\n        }\n    });\n})\n\n// EDIT CAMPGROUND ROUTE\nrouter.get(\"/:id/edit\", middleware.checkCampgroundOwnership, function(req, res){\n    Image.findById(req.params.id, function(err, foundImage){\n        res.render(\"images/edit\", {gallery: foundImage});\n    });\n});\n\n// UPDATE CAMPGROUND ROUTE\n// router.put(\"/:id\",middleware.checkCampgroundOwnership, function(req, res){\n//     // find and update the correct campground\n//     Image.findByIdAndUpdate(req.params.id, req.body.gallery, function(err, updatedGallery){\n//       if(err){\n//           res.redirect(\"/gallery\");\n//       } else {\n//           //redirect somewhere(show page)\n//           res.redirect(\"/gallery/\" + req.params.id);\n//       }\n//     });\n// });\nrouter.put(\"/:id\", function(req, res){\n  geocoder.geocode(req.body.location, function (err, data) {\n    if (err){\n        return res.redirect('back');\n    }\n    if (data.results[0] === undefined) {\n        req.flash('error', \"Location invalid\");\n        return res.redirect('back');\n    }\n    var lat = data.results[0].geometry.location.lat;\n    var lng = data.results[0].geometry.location.lng;\n    var location = data.results[0].formatted_address;\n    var newData = {name: req.body.gallery.name, image: req.body.gallery.image, description: req.body.gallery.description,  location: location, lat: lat, lng: lng};\n    Image.findByIdAndUpdate(req.params.id, {$set: newData}, function(err, updatedGallery){\n        if(err){\n            req.flash(\"error\", err.message);\n            res.redirect(\"back\");\n        } else {\n            req.flash(\"success\",\"Successfully Updated!\");\n            res.redirect(\"/gallery/\" + updatedGallery._id);\n        }\n    });\n  });\n});\n\n// DESTROY CAMPGROUND ROUTE\nrouter.delete(\"/:id\", middleware.checkCampgroundOwnership, function(req, res){\n   Image.findByIdAndRemove(req.params.id, function(err){\n      if(err){\n          res.redirect(\"/gallery\");\n      } else {\n          res.redirect(\"/gallery\");\n      }\n   });\n});\n\nmodule.exports = router;","undoManager":{"mark":-2,"position":54,"stack":[[{"start":{"row":31,"column":16},"end":{"row":32,"column":0},"action":"insert","lines":["",""],"id":17},{"start":{"row":32,"column":0},"end":{"row":32,"column":1},"action":"insert","lines":["/"]},{"start":{"row":32,"column":1},"end":{"row":32,"column":2},"action":"insert","lines":["/"]}],[{"start":{"row":32,"column":2},"end":{"row":32,"column":3},"action":"insert","lines":[" "],"id":18},{"start":{"row":32,"column":3},"end":{"row":32,"column":4},"action":"insert","lines":["R"]},{"start":{"row":32,"column":4},"end":{"row":32,"column":5},"action":"insert","lines":["e"]},{"start":{"row":32,"column":5},"end":{"row":32,"column":6},"action":"insert","lines":["d"]},{"start":{"row":32,"column":6},"end":{"row":32,"column":7},"action":"insert","lines":["i"]},{"start":{"row":32,"column":7},"end":{"row":32,"column":8},"action":"insert","lines":["r"]},{"start":{"row":32,"column":8},"end":{"row":32,"column":9},"action":"insert","lines":["e"]},{"start":{"row":32,"column":9},"end":{"row":32,"column":10},"action":"insert","lines":["c"]},{"start":{"row":32,"column":10},"end":{"row":32,"column":11},"action":"insert","lines":["t"]}],[{"start":{"row":32,"column":11},"end":{"row":32,"column":12},"action":"insert","lines":[" "],"id":19},{"start":{"row":32,"column":12},"end":{"row":32,"column":13},"action":"insert","lines":["t"]},{"start":{"row":32,"column":13},"end":{"row":32,"column":14},"action":"insert","lines":["o"]}],[{"start":{"row":32,"column":14},"end":{"row":32,"column":15},"action":"insert","lines":[" "],"id":20},{"start":{"row":32,"column":15},"end":{"row":32,"column":16},"action":"insert","lines":["g"]},{"start":{"row":32,"column":16},"end":{"row":32,"column":17},"action":"insert","lines":["a"]}],[{"start":{"row":32,"column":16},"end":{"row":32,"column":17},"action":"remove","lines":["a"],"id":21},{"start":{"row":32,"column":15},"end":{"row":32,"column":16},"action":"remove","lines":["g"]}],[{"start":{"row":32,"column":15},"end":{"row":32,"column":16},"action":"insert","lines":["G"],"id":22}],[{"start":{"row":32,"column":15},"end":{"row":32,"column":16},"action":"remove","lines":["G"],"id":23}],[{"start":{"row":32,"column":15},"end":{"row":32,"column":16},"action":"insert","lines":["G"],"id":24},{"start":{"row":32,"column":16},"end":{"row":32,"column":17},"action":"insert","lines":["A"]}],[{"start":{"row":32,"column":16},"end":{"row":32,"column":17},"action":"remove","lines":["A"],"id":25},{"start":{"row":32,"column":15},"end":{"row":32,"column":16},"action":"remove","lines":["G"]}],[{"start":{"row":32,"column":15},"end":{"row":32,"column":16},"action":"insert","lines":["g"],"id":26},{"start":{"row":32,"column":16},"end":{"row":32,"column":17},"action":"insert","lines":["a"]},{"start":{"row":32,"column":17},"end":{"row":32,"column":18},"action":"insert","lines":["l"]},{"start":{"row":32,"column":18},"end":{"row":32,"column":19},"action":"insert","lines":["l"]},{"start":{"row":32,"column":19},"end":{"row":32,"column":20},"action":"insert","lines":["e"]},{"start":{"row":32,"column":20},"end":{"row":32,"column":21},"action":"insert","lines":["r"]},{"start":{"row":32,"column":21},"end":{"row":32,"column":22},"action":"insert","lines":["y"]}],[{"start":{"row":32,"column":22},"end":{"row":32,"column":23},"action":"insert","lines":[" "],"id":27},{"start":{"row":32,"column":23},"end":{"row":32,"column":24},"action":"insert","lines":["t"]},{"start":{"row":32,"column":24},"end":{"row":32,"column":25},"action":"insert","lines":["o"]},{"start":{"row":32,"column":25},"end":{"row":32,"column":26},"action":"insert","lines":["u"]}],[{"start":{"row":32,"column":25},"end":{"row":32,"column":26},"action":"remove","lines":["u"],"id":28},{"start":{"row":32,"column":24},"end":{"row":32,"column":25},"action":"remove","lines":["o"]},{"start":{"row":32,"column":23},"end":{"row":32,"column":24},"action":"remove","lines":["t"]}],[{"start":{"row":32,"column":23},"end":{"row":32,"column":24},"action":"insert","lines":["r"],"id":29},{"start":{"row":32,"column":24},"end":{"row":32,"column":25},"action":"insert","lines":["o"]},{"start":{"row":32,"column":25},"end":{"row":32,"column":26},"action":"insert","lines":["u"]},{"start":{"row":32,"column":26},"end":{"row":32,"column":27},"action":"insert","lines":["t"]},{"start":{"row":32,"column":27},"end":{"row":32,"column":28},"action":"insert","lines":["e"]},{"start":{"row":32,"column":28},"end":{"row":32,"column":29},"action":"insert","lines":["s"]}],[{"start":{"row":32,"column":28},"end":{"row":32,"column":29},"action":"remove","lines":["s"],"id":30},{"start":{"row":32,"column":27},"end":{"row":32,"column":28},"action":"remove","lines":["e"]},{"start":{"row":32,"column":26},"end":{"row":32,"column":27},"action":"remove","lines":["t"]},{"start":{"row":32,"column":25},"end":{"row":32,"column":26},"action":"remove","lines":["u"]},{"start":{"row":32,"column":24},"end":{"row":32,"column":25},"action":"remove","lines":["o"]},{"start":{"row":32,"column":23},"end":{"row":32,"column":24},"action":"remove","lines":["r"]}],[{"start":{"row":32,"column":23},"end":{"row":32,"column":24},"action":"insert","lines":["r"],"id":31},{"start":{"row":32,"column":24},"end":{"row":32,"column":25},"action":"insert","lines":["o"]},{"start":{"row":32,"column":25},"end":{"row":32,"column":26},"action":"insert","lines":["u"]},{"start":{"row":32,"column":26},"end":{"row":32,"column":27},"action":"insert","lines":["t"]},{"start":{"row":32,"column":27},"end":{"row":32,"column":28},"action":"insert","lines":["e"]},{"start":{"row":32,"column":28},"end":{"row":32,"column":29},"action":"insert","lines":["s"]}],[{"start":{"row":32,"column":29},"end":{"row":32,"column":30},"action":"insert","lines":[" "],"id":32},{"start":{"row":32,"column":30},"end":{"row":32,"column":31},"action":"insert","lines":["a"]},{"start":{"row":32,"column":31},"end":{"row":32,"column":32},"action":"insert","lines":["n"]},{"start":{"row":32,"column":32},"end":{"row":32,"column":33},"action":"insert","lines":["d"]}],[{"start":{"row":32,"column":33},"end":{"row":32,"column":34},"action":"insert","lines":[" "],"id":33},{"start":{"row":32,"column":34},"end":{"row":32,"column":35},"action":"insert","lines":["p"]},{"start":{"row":32,"column":35},"end":{"row":32,"column":36},"action":"insert","lines":["a"]},{"start":{"row":32,"column":36},"end":{"row":32,"column":37},"action":"insert","lines":["s"]},{"start":{"row":32,"column":37},"end":{"row":32,"column":38},"action":"insert","lines":["s"]}],[{"start":{"row":32,"column":38},"end":{"row":32,"column":39},"action":"insert","lines":[" "],"id":34},{"start":{"row":32,"column":39},"end":{"row":32,"column":40},"action":"insert","lines":["a"]},{"start":{"row":32,"column":40},"end":{"row":32,"column":41},"action":"insert","lines":["l"]},{"start":{"row":32,"column":41},"end":{"row":32,"column":42},"action":"insert","lines":["l"]},{"start":{"row":32,"column":42},"end":{"row":32,"column":43},"action":"insert","lines":["I"]},{"start":{"row":32,"column":43},"end":{"row":32,"column":44},"action":"insert","lines":["m"]},{"start":{"row":32,"column":44},"end":{"row":32,"column":45},"action":"insert","lines":["a"]},{"start":{"row":32,"column":45},"end":{"row":32,"column":46},"action":"insert","lines":["g"]},{"start":{"row":32,"column":46},"end":{"row":32,"column":47},"action":"insert","lines":["e"]}],[{"start":{"row":32,"column":47},"end":{"row":32,"column":48},"action":"insert","lines":["s"],"id":35}],[{"start":{"row":32,"column":48},"end":{"row":32,"column":49},"action":"insert","lines":[" "],"id":36},{"start":{"row":32,"column":49},"end":{"row":32,"column":50},"action":"insert","lines":["O"]},{"start":{"row":32,"column":50},"end":{"row":32,"column":51},"action":"insert","lines":["b"]},{"start":{"row":32,"column":51},"end":{"row":32,"column":52},"action":"insert","lines":["e"]}],[{"start":{"row":32,"column":51},"end":{"row":32,"column":52},"action":"remove","lines":["e"],"id":37},{"start":{"row":32,"column":50},"end":{"row":32,"column":51},"action":"remove","lines":["b"]},{"start":{"row":32,"column":49},"end":{"row":32,"column":50},"action":"remove","lines":["O"]}],[{"start":{"row":31,"column":16},"end":{"row":31,"column":17},"action":"insert","lines":[":"],"id":38}],[{"start":{"row":31,"column":17},"end":{"row":31,"column":18},"action":"insert","lines":[" "],"id":39},{"start":{"row":31,"column":18},"end":{"row":31,"column":19},"action":"insert","lines":["p"]},{"start":{"row":31,"column":19},"end":{"row":31,"column":20},"action":"insert","lines":["u"]},{"start":{"row":31,"column":20},"end":{"row":31,"column":21},"action":"insert","lines":["l"]},{"start":{"row":31,"column":21},"end":{"row":31,"column":22},"action":"insert","lines":["l"]}],[{"start":{"row":31,"column":22},"end":{"row":31,"column":23},"action":"insert","lines":[" "],"id":40},{"start":{"row":31,"column":23},"end":{"row":31,"column":24},"action":"insert","lines":["a"]},{"start":{"row":31,"column":24},"end":{"row":31,"column":25},"action":"insert","lines":["l"]},{"start":{"row":31,"column":25},"end":{"row":31,"column":26},"action":"insert","lines":["l"]}],[{"start":{"row":31,"column":26},"end":{"row":31,"column":27},"action":"insert","lines":[" "],"id":41},{"start":{"row":31,"column":27},"end":{"row":31,"column":28},"action":"insert","lines":["d"]},{"start":{"row":31,"column":28},"end":{"row":31,"column":29},"action":"insert","lines":["a"]},{"start":{"row":31,"column":29},"end":{"row":31,"column":30},"action":"insert","lines":["t"]},{"start":{"row":31,"column":30},"end":{"row":31,"column":31},"action":"insert","lines":["a"]},{"start":{"row":31,"column":31},"end":{"row":31,"column":32},"action":"insert","lines":["t"]}],[{"start":{"row":31,"column":31},"end":{"row":31,"column":32},"action":"remove","lines":["t"],"id":42}],[{"start":{"row":31,"column":31},"end":{"row":31,"column":32},"action":"insert","lines":[" "],"id":43},{"start":{"row":31,"column":32},"end":{"row":31,"column":33},"action":"insert","lines":["f"]},{"start":{"row":31,"column":33},"end":{"row":31,"column":34},"action":"insert","lines":["r"]},{"start":{"row":31,"column":34},"end":{"row":31,"column":35},"action":"insert","lines":["o"]},{"start":{"row":31,"column":35},"end":{"row":31,"column":36},"action":"insert","lines":["m"]},{"start":{"row":31,"column":36},"end":{"row":31,"column":37},"action":"insert","lines":["t"]}],[{"start":{"row":31,"column":37},"end":{"row":31,"column":38},"action":"insert","lines":[" "],"id":44}],[{"start":{"row":31,"column":37},"end":{"row":31,"column":38},"action":"remove","lines":[" "],"id":45},{"start":{"row":31,"column":36},"end":{"row":31,"column":37},"action":"remove","lines":["t"]}],[{"start":{"row":31,"column":36},"end":{"row":31,"column":37},"action":"insert","lines":[" "],"id":46},{"start":{"row":31,"column":37},"end":{"row":31,"column":38},"action":"insert","lines":["d"]}],[{"start":{"row":31,"column":37},"end":{"row":31,"column":38},"action":"remove","lines":["d"],"id":47}],[{"start":{"row":31,"column":37},"end":{"row":31,"column":38},"action":"insert","lines":["D"],"id":48},{"start":{"row":31,"column":38},"end":{"row":31,"column":39},"action":"insert","lines":["B"]}],[{"start":{"row":31,"column":39},"end":{"row":31,"column":40},"action":"insert","lines":[","],"id":49}],[{"start":{"row":31,"column":40},"end":{"row":31,"column":41},"action":"insert","lines":[" "],"id":50},{"start":{"row":31,"column":41},"end":{"row":31,"column":42},"action":"insert","lines":["a"]},{"start":{"row":31,"column":42},"end":{"row":31,"column":43},"action":"insert","lines":["n"]},{"start":{"row":31,"column":43},"end":{"row":31,"column":44},"action":"insert","lines":["d"]}],[{"start":{"row":31,"column":44},"end":{"row":31,"column":45},"action":"insert","lines":[" "],"id":51},{"start":{"row":31,"column":45},"end":{"row":31,"column":46},"action":"insert","lines":["r"]},{"start":{"row":31,"column":46},"end":{"row":31,"column":47},"action":"insert","lines":["e"]},{"start":{"row":31,"column":47},"end":{"row":31,"column":48},"action":"insert","lines":["d"]},{"start":{"row":31,"column":48},"end":{"row":31,"column":49},"action":"insert","lines":["e"]}],[{"start":{"row":31,"column":48},"end":{"row":31,"column":49},"action":"remove","lines":["e"],"id":52},{"start":{"row":31,"column":47},"end":{"row":31,"column":48},"action":"remove","lines":["d"]}],[{"start":{"row":31,"column":47},"end":{"row":31,"column":48},"action":"insert","lines":["n"],"id":53},{"start":{"row":31,"column":48},"end":{"row":31,"column":49},"action":"insert","lines":["e"]}],[{"start":{"row":31,"column":48},"end":{"row":31,"column":49},"action":"remove","lines":["e"],"id":54}],[{"start":{"row":31,"column":48},"end":{"row":31,"column":49},"action":"insert","lines":["d"],"id":55},{"start":{"row":31,"column":49},"end":{"row":31,"column":50},"action":"insert","lines":["e"]},{"start":{"row":31,"column":50},"end":{"row":31,"column":51},"action":"insert","lines":["r"]}],[{"start":{"row":31,"column":51},"end":{"row":31,"column":52},"action":"insert","lines":[" "],"id":56}],[{"start":{"row":31,"column":52},"end":{"row":31,"column":53},"action":"insert","lines":["i"],"id":57},{"start":{"row":31,"column":53},"end":{"row":31,"column":54},"action":"insert","lines":["n"]},{"start":{"row":31,"column":54},"end":{"row":31,"column":55},"action":"insert","lines":["d"]},{"start":{"row":31,"column":55},"end":{"row":31,"column":56},"action":"insert","lines":["e"]},{"start":{"row":31,"column":56},"end":{"row":31,"column":57},"action":"insert","lines":["x"]}],[{"start":{"row":31,"column":57},"end":{"row":31,"column":58},"action":"insert","lines":["."],"id":58},{"start":{"row":31,"column":58},"end":{"row":31,"column":59},"action":"insert","lines":["e"]},{"start":{"row":31,"column":59},"end":{"row":31,"column":60},"action":"insert","lines":["j"]},{"start":{"row":31,"column":60},"end":{"row":31,"column":61},"action":"insert","lines":["s"]}],[{"start":{"row":31,"column":61},"end":{"row":31,"column":62},"action":"insert","lines":[","],"id":59}],[{"start":{"row":31,"column":62},"end":{"row":31,"column":63},"action":"insert","lines":[" "],"id":60},{"start":{"row":31,"column":63},"end":{"row":31,"column":64},"action":"insert","lines":["p"]},{"start":{"row":31,"column":64},"end":{"row":31,"column":65},"action":"insert","lines":["a"]},{"start":{"row":31,"column":65},"end":{"row":31,"column":66},"action":"insert","lines":["s"]},{"start":{"row":31,"column":66},"end":{"row":31,"column":67},"action":"insert","lines":["s"]}],[{"start":{"row":31,"column":67},"end":{"row":31,"column":68},"action":"insert","lines":[" "],"id":61},{"start":{"row":31,"column":68},"end":{"row":31,"column":69},"action":"insert","lines":["a"]},{"start":{"row":31,"column":69},"end":{"row":31,"column":70},"action":"insert","lines":["l"]},{"start":{"row":31,"column":70},"end":{"row":31,"column":71},"action":"insert","lines":["l"]}],[{"start":{"row":31,"column":71},"end":{"row":31,"column":72},"action":"insert","lines":["I"],"id":62},{"start":{"row":31,"column":72},"end":{"row":31,"column":73},"action":"insert","lines":["m"]},{"start":{"row":31,"column":73},"end":{"row":31,"column":74},"action":"insert","lines":["a"]},{"start":{"row":31,"column":74},"end":{"row":31,"column":75},"action":"insert","lines":["g"]},{"start":{"row":31,"column":75},"end":{"row":31,"column":76},"action":"insert","lines":["e"]},{"start":{"row":31,"column":76},"end":{"row":31,"column":77},"action":"insert","lines":["s"]}],[{"start":{"row":31,"column":77},"end":{"row":31,"column":78},"action":"insert","lines":[" "],"id":63},{"start":{"row":31,"column":78},"end":{"row":31,"column":79},"action":"insert","lines":["t"]},{"start":{"row":31,"column":79},"end":{"row":31,"column":80},"action":"insert","lines":["o"]}],[{"start":{"row":31,"column":80},"end":{"row":31,"column":81},"action":"insert","lines":[" "],"id":64},{"start":{"row":31,"column":81},"end":{"row":31,"column":82},"action":"insert","lines":["i"]},{"start":{"row":31,"column":82},"end":{"row":31,"column":83},"action":"insert","lines":["n"]},{"start":{"row":31,"column":83},"end":{"row":31,"column":84},"action":"insert","lines":["d"]},{"start":{"row":31,"column":84},"end":{"row":31,"column":85},"action":"insert","lines":["e"]},{"start":{"row":31,"column":85},"end":{"row":31,"column":86},"action":"insert","lines":["x"]},{"start":{"row":31,"column":86},"end":{"row":31,"column":87},"action":"insert","lines":["."]}],[{"start":{"row":31,"column":87},"end":{"row":31,"column":88},"action":"insert","lines":["e"],"id":65},{"start":{"row":31,"column":88},"end":{"row":31,"column":89},"action":"insert","lines":["j"]},{"start":{"row":31,"column":89},"end":{"row":31,"column":90},"action":"insert","lines":["s"]}],[{"start":{"row":31,"column":90},"end":{"row":31,"column":91},"action":"insert","lines":[" "],"id":66},{"start":{"row":31,"column":91},"end":{"row":31,"column":92},"action":"insert","lines":["a"]},{"start":{"row":31,"column":92},"end":{"row":31,"column":93},"action":"insert","lines":["s"]}],[{"start":{"row":31,"column":93},"end":{"row":31,"column":94},"action":"insert","lines":[" "],"id":67}],[{"start":{"row":31,"column":94},"end":{"row":31,"column":95},"action":"insert","lines":["g"],"id":68},{"start":{"row":31,"column":95},"end":{"row":31,"column":96},"action":"insert","lines":["a"]},{"start":{"row":31,"column":96},"end":{"row":31,"column":97},"action":"insert","lines":["l"]},{"start":{"row":31,"column":97},"end":{"row":31,"column":98},"action":"insert","lines":["l"]},{"start":{"row":31,"column":98},"end":{"row":31,"column":99},"action":"insert","lines":["r"]},{"start":{"row":31,"column":99},"end":{"row":31,"column":100},"action":"insert","lines":["y"]}],[{"start":{"row":31,"column":99},"end":{"row":31,"column":100},"action":"remove","lines":["y"],"id":69},{"start":{"row":31,"column":98},"end":{"row":31,"column":99},"action":"remove","lines":["r"]}],[{"start":{"row":31,"column":98},"end":{"row":31,"column":99},"action":"insert","lines":["e"],"id":70},{"start":{"row":31,"column":99},"end":{"row":31,"column":100},"action":"insert","lines":["r"]},{"start":{"row":31,"column":100},"end":{"row":31,"column":101},"action":"insert","lines":["y"]}],[{"start":{"row":32,"column":0},"end":{"row":32,"column":49},"action":"remove","lines":["// Redirect to gallery routes and pass allImages "],"id":71},{"start":{"row":31,"column":101},"end":{"row":32,"column":0},"action":"remove","lines":["",""]}]]},"ace":{"folds":[],"scrolltop":552,"scrollleft":0,"selection":{"start":{"row":31,"column":101},"end":{"row":31,"column":101},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":33,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1524535079466}